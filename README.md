# Simio Portal MCP

This repo provides a Model Context Protocol (MCP) server exposing Simio Portal functionality (REST API + workflows) as tools for Claude Desktop. It combines:

- Autogenerated REST tools from the Simio Portal OpenAPI spec  
- Handwritten helpers for authentication, workflows, and utilities  
- Smoke tests and example usage  

## Features

- **Authentication**: REST-based with PAT, plus back-compat aliases  
- **Model tools**: list models, find model ID by project  
- **Workflows**: create or replace plan runs, set runtime options  
- **Helpers**: logging, retries, error wrapping  

## Installation

Clone this repo and open a terminal in the folder:

```bash
cd "C:\Users<YourName>\Desktop\GitHub Local Repos\simio_portal_mcp"
```

Create a Python virtual environment (Python 3.12 recommended):

```bash
py -3.12 -m venv .venv
..venv\Scripts\Activate.ps1
python -m pip install --upgrade pip
```

Install dependencies:

```bash
pip install -r requirements.txt
```

Set up your `.env`:

```bash
Copy-Item .env.example .env
```

Edit `.env` and fill in `SIMIO_PORTAL_URL` + `PERSONAL_ACCESS_TOKEN`.

Run the server:

```bash
python server.py
```

(Optional) Run the smoke test:

```bash
python smoke_test.py
```

## Using with Claude Desktop

Claude Desktop can automatically discover and launch this MCP server.

Locate your Claude Desktop config file:

- **Windows**: `%APPDATA%\Claude\config.json`  
- **macOS**: `~/Library/Application Support/Claude/config.json`  

Add (or update) an MCP server entry:

```json
{
  "mcpServers": {
    "SimioPortal": {
      "command": "C:\\Users\\<YourName>\\Desktop\\GitHub Local Repos\\simio_portal_mcp\\.venv\\Scripts\\python.exe",
      "args": ["server.py"],
      "cwd": "C:\\Users\\<YourName>\\Desktop\\GitHub Local Repos\\simio_portal_mcp"
    }
  }
}
```

(Make sure the paths to `python.exe`, `server.py`, and `cwd` match your machine.)

Restart Claude Desktop.  
Claude should list **SimioPortal** as an available MCP server.  
Claude will run a quick validation (`portal_authenticate`, `list_models`) — if it passes, you’re good.

## Development Notes

- Autogenerated REST client lives in `rest_client_generated.py`  
- All tools are registered via the shared MCP instance (`mcp_app.py`)  
- Handwritten workflow tools log whether runtime options were set via adapter or direct client  
- If regenerating REST tools, ensure `api_tools_rest_generated.py` uses `from mcp_app import mcp`  

## License

MIT License © Simio LLC, 2025